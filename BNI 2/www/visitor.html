<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Phone Gap</title>
<link href="css/style.css" rel="stylesheet" type="text/css">
</head>
    
<body onload="onBodyLoadVisitor()">

    <div class="top_bar">
        <a href="index.html"><div class="back">Back</div></a>
        <div class="home_butt"><a href="index.html"><img src="images/home.png" /></a></div>
    </div>


    <div class="main">
        <div id="signature">
            <div id='img_close'>
                <img src="images/sig_close.png" />
            </div>
            <div id='img_Done'>
                <img src="images/done.png" />
            </div>
            <div id="sig_area">
            </div>
        </div>
        
        <div class="heading">
            <img src="images/visitor.png" />
            <p>Visitors <span id="meeting_status"></span></p>
        </div>

        <div class="visitors_outter">
            <div class="text_form_outter_v">
                <p></p>
                <div class="form_txt_v">
                    <div class="radio_outter">
                        <div class="radio"><label>Visitor &nbsp;&nbsp;&nbsp;&nbsp;  </label>
                            <input type="radio" id="radio_visitor" name="visitor" value="visitor" style="width:25px; height:25px;"/>
                        </div>
                        <div class="radio"><label>Substitute &nbsp;&nbsp;&nbsp;&nbsp;</label>
                            <input type="radio" id="radio_substitute" name="visitor" value="substitute" style="width:25px; height:25px;"/>
                        </div>    
                    </div>
                </div>
            </div>
              

            <div class="text_form_outter_v">
                <p id="tipoVisitor">Visitor invited by<span>*</span></p>
                <div class="form_txt_v">
                    <div class="form_txt_bg_v">
                    <select id="members" name="members" class="size_list_bg_v"></select>
                    </div>
                </div>
            </div>

            <div class="text_form_outter_v">
                <p>Name<span>*</span></p>
                <div class="form_txt_v">
                    <input id="visitorFirstName" type="text" placeholder="Full Name" class="form_txt_bg_v">
                </div>
            </div>

            <div class="text_form_outter_v">
                <p>Email <span>*</span></p>
                <div class="form_txt_v">
                    <input id="visitorEmail" type="text" placeholder="Email" class="form_txt_bg_v">
                </div>
            </div>

            <div class="text_form_outter_v">
                <p>Company</p>
                <div class="form_txt_v">
                    <input id="company" type="text" placeholder="Business name" class="form_txt_bg_v">
                </div>
            </div>

            <div class="text_form_outter_v">
                <p>Phone</p>
                <div class="form_txt_v">
                    <input id="visitorPhoneNumber" type="number"  placeholder="Phone Number" class="form_txt_bg_v" onkeypress="validate(event)">
                </div>
            </div>

            <div class="text_form_outter_v">
                <p></p>
                <div class="form_txt_v">
                    <div class="privacy"></div>
                </div>
            </div>
            <div class="clear"></div>
            <div class="sig_outter"> 
                <label>I Agree:</label>
                 <input type="reset" name="submit" value="Signature" onclick="add_signature();" class="sig_button" />
            </div> 
            <div class="clear"></div>
            <div class="text_form_outter_v">
                <p></p>
                <div class="form_txt_v">
                    <div class="meeting_fee" id ="MeetingFeeFromDb">Meeting Fee: </div>
                </div>
            </div>


            <div class="text_form_outter_v">
                <p></p>
                <div class="form_txt_v">
                    <div class="radio_outter">
                        <div class="radio"><label>Cash &nbsp;&nbsp;&nbsp;&nbsp;  </label><input onclick="document.getElementById('paymentByMember').disabled = true;" type="radio" id="radio_cash" name="cash" value="cash"   style="width:25px; height:25px;" checked/></div>
                        <div class="radio"><label>Cheque&nbsp;</label><input onclick="document.getElementById('paymentByMember').disabled = true;" type="radio" id="radio_cheque" name="cash" value="check" style="width:25px; height:25px;" /></div>
                        <div class="radio"><label>Paid By&nbsp;</label><input onclick="document.getElementById('paymentByMember').disabled = false;" type="radio" id="radio_paidBy" name="cash" value="check" style="width:25px; height:25px;" /></div>
                        
                        
                        <div class="clear"></div>
                            <div class="size_list_outter">
                                <select name="age" class="size_list_bg" id = "paymentByMember"  >
                                    <option value=""> Member </option> 
                                </select></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text_form_outter_v">
                <p></p>
                <div class="form_txt_v">
                    <div class="buttons">
                        <div class="clear_outter">
                            <input type="button" name="submit" value="Clear" class="clear_button" onClick="ClearPressed()" />
                        </div>

                        <div class="pay_outter">
                            <input type="button" id = "PayInVisitor" name="submit" value="Pay/Sign-in" class="pay_button" onClick="payPressed();" />
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="clear"></div>
    </div>


    <div class="bottom_bar">
        <div class="icons_outter">
            <div class="tab">
                <ul>
                    <a href="index.html"><li>
                        <img src="images/tab_member.png" />
                        <p>Member</p>
                    </li></a>



                    <a href="visitor.html"><li>
                        <img src="images/visitor.png" />
                        <p>Visitors</p>
                    </li></a>


                    <a href="settings.html"><li style="border:none;">
                        <img src="images/admin.png" />
                        <p>Administration</p>
                    </li></a>
                </ul>
            </div>
        </div>
    </div>
    
   
    
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.autocomplete.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/visitor.js"></script>
    <script src="js/jSignature.min.js"></script>
    <script>
          
          $(function(){

           $('#visitorFirstName').keyup(function(e){

                      if($("#visitorFirstName").val().length <= 1){
                        $('#visitorEmail').val("");
                        $('#company').val("");
                        $('#visitorPhoneNumber').val("");
                     }
                });

            });

        function add_signature()
        {
            $("#signature").show();
            $("#sig_area").jSignature();
        }
        
        $(document).ready(function() {
                          $("#signature").jSignature();
                          
                          $("#img_close").click(function () {
                              $("#signature").jSignature('reset');
                              $("#signature").hide();
                          });
        });

        $("#img_Done").click(function () {
              $("#signature").jSignature('reset');
              $("#signature").hide();
              });

        $('input[id=radio_visitor]').click(function() {
            
            typeVisitor = 'visitor';
            document.getElementById('radio_cash').disabled = false;
            document.getElementById('radio_cheque').disabled = false;
            document.getElementById('radio_paidBy').disabled = true;
            document.getElementById('paymentByMember').disabled = true;
            $('#tipoVisitor').html('Visitor invited by:<span>*</span>');
            $("#members option").remove();
            $("#members").append("<option value='0'>None</option>");
            loadMemberList(1);
            

            //alert($('input[id=radio_visitor]:checked').val());
        });

        $('input[id=radio_substitute]').click(function() {
             
            typeVisitor = 'substitute';
            document.getElementById('radio_cash').disabled = true;
            document.getElementById('radio_cheque').disabled = true;
            document.getElementById('radio_paidBy').disabled = true;
            $('#tipoVisitor').html('Substitute for:<span>*</span>');
            $("#members option").remove();
            loadMemberList(0);
            
            // document.getElementById('radio_paidBy').disabled = false;

             //alert($('input[id=radio_substitute]:checked').val());
        });

        $('#members').on('change',function(event){

            if(typeVisitor == 'visitor'){
                if($('#members').val() == 0){
                   document.getElementById('radio_paidBy').disabled = true;
                   document.getElementById('paymentByMember').disabled = true;
                }else{

                   document.getElementById('radio_paidBy').disabled = false;
                   document.getElementById('paymentByMember').disabled = false;
                   $('#paymentByMember').val($('#members').val());
                   $('#radio_paidBy').prop('checked', true);
                   


                }
            }
            //console.log("cambio la lista de miembros");
            //console.log("valor "+$('#members').val());

        });

        </script>
</body>
</html>
